
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>è‹±èª â‡† ä¸­æ–‡ é…å°éŠæˆ²ï¼šè—¥å±€ç¯‡</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(to bottom, #e8f5e9, #c8e6c9);
      color: #2e7d32;
      text-align: center;
      padding: 20px;
    }
    h2 { color: #43a047; margin-bottom: 8px; }
    .game-container {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 20px;
    }
    .column {
      width: 40%;
    }
    .card {
      background: #e0f2f1;
      border: 2px solid #4dd0e1;
      border-radius: 12px;
      padding: 10px 15px;
      margin: 8px 0;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      user-select: none;
    }
    .card:hover {
      background: #b2ebf2;
      transform: scale(1.03);
    }
    .matched {
      background: #fff176 !important;
      border-color: #fdd835 !important;
      color: #33691e;
      font-weight: bold;
      pointer-events: none;
    }
    .wrong {
      background: #ffcdd2 !important;
      border-color: #e57373 !important;
      color: #b71c1c;
    }
    #message {
      font-size: 18px;
      color: #d32f2f;
      margin-top: 8px;
      min-height: 24px;
    }
    #score, #timer {
      font-size: 18px;
      color: #2e7d32;
      margin: 8px 0;
    }
    #reset-btn {
      padding: 6px 14px;
      border: none;
      background: #66bb6a;
      color: white;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h2>è‹±èª â‡† ä¸­æ–‡ é…å°éŠæˆ²ï¼šè—¥å±€ç¯‡</h2>
<p>é»é¸å·¦é‚Šçš„è‹±æ–‡ï¼Œå†é»å³é‚Šçš„ä¸­æ–‡ç¿»è­¯ï¼Œå®Œæˆé…å°ï¼</p>
<div id="message"></div>
<div id="score">ç›®å‰ç­”å°ï¼š<span id="correct-count">0</span> / 20</div>
<div id="timer">å·²ç¶“èŠ±è²»æ™‚é–“ï¼š<span id="elapsed-time">0</span> ç§’</div>
<button id="reset-btn" onclick="location.reload()">å†ç©ä¸€æ¬¡</button>

<div class="game-container">
  <div class="column" id="english">
    <div class="card" data-pair="pair3">painkiller</div>
<div class="card" data-pair="pair15">Just wait here, pretty patient.</div>
<div class="card" data-pair="pair8">pharmacist</div>
<div class="card" data-pair="pair7">side effects</div>
<div class="card" data-pair="pair19">Time to take your medicine, brave girl.</div>
<div class="card" data-pair="pair0">pharmacy</div>
<div class="card" data-pair="pair13">Maybe a small tube of ointment for this scratch.</div>
<div class="card" data-pair="pair14">Iâ€™ll ask the pharmacist for you.</div>
<div class="card" data-pair="pair6">dosage</div>
<div class="card" data-pair="pair2">over-the-counter medicine</div>
<div class="card" data-pair="pair4">cold medicine</div>
<div class="card" data-pair="pair9">refill</div>
<div class="card" data-pair="pair16">Thanksâ€¦ and donâ€™t flirt with the pharmacist.</div>
<div class="card" data-pair="pair5">ointment</div>
<div class="card" data-pair="pair1">prescription</div>
<div class="card" data-pair="pair12">You need some cold medicine too, right? Anything with fewer side effects.</div>
<div class="card" data-pair="pair17">My whole attention is on you.</div>
<div class="card" data-pair="pair10">Do you remember what the doctor said about your prescription?</div>
<div class="card" data-pair="pair11">I need to bring this prescription to the pharmacy and ask for a refill.</div>
<div class="card" data-pair="pair18">I have a prescription. Can I get a refill, please?</div>
  </div>
  <div class="column" id="chinese">
    <div class="card" data-pair="pair19">è©²åƒè—¥å›‰ï¼Œæˆ‘çš„å‹‡æ•¢å°å§ã€‚</div>
<div class="card" data-pair="pair13">é€™å€‹å°æ“¦å‚·å¯èƒ½ä¹Ÿè¦è²·ä¸€é»è»Ÿè†ã€‚</div>
<div class="card" data-pair="pair5">è»Ÿè†</div>
<div class="card" data-pair="pair10">å¦³é‚„è¨˜å¾—é†«ç”Ÿæ€éº¼èªªå¦³çš„è™•æ–¹è—¥è¦æ€éº¼æ‹¿å—ï¼Ÿ</div>
<div class="card" data-pair="pair14">æˆ‘å¹«å¦³å•è—¥åŠ‘å¸«ã€‚</div>
<div class="card" data-pair="pair1">è™•æ–¹ç±¤</div>
<div class="card" data-pair="pair4">æ„Ÿå†’è—¥</div>
<div class="card" data-pair="pair16">è¬å•¦â€¦â€¦ç„¶å¾Œä¸å‡†è·Ÿè—¥åŠ‘å¸«æ­è¨•å–”ã€‚</div>
<div class="card" data-pair="pair9">è£œè—¥</div>
<div class="card" data-pair="pair8">è—¥åŠ‘å¸«</div>
<div class="card" data-pair="pair12">å¦³ä¹Ÿéœ€è¦ä¸€äº›æ„Ÿå†’è—¥å°å§ï¼Ÿè¦é‚£ç¨®å‰¯ä½œç”¨å°‘ä¸€é»çš„ã€‚</div>
<div class="card" data-pair="pair17">ä¸å¯èƒ½ï¼Œæˆ‘æ•´å€‹æ³¨æ„åŠ›éƒ½åœ¨å¦³èº«ä¸Šå•¦ã€‚</div>
<div class="card" data-pair="pair0">è—¥å±€</div>
<div class="card" data-pair="pair11">æˆ‘è¦æ‹¿é€™å¼µè™•æ–¹ç±¤å»è—¥å±€ï¼Œç„¶å¾Œè«‹ä»–å€‘è£œè—¥ã€‚</div>
<div class="card" data-pair="pair18">æˆ‘æœ‰è™•æ–¹ç±¤ï¼Œè«‹å•å¯ä»¥è£œè—¥å—ï¼Ÿ</div>
<div class="card" data-pair="pair2">éè™•æ–¹è—¥</div>
<div class="card" data-pair="pair3">æ­¢ç—›è—¥</div>
<div class="card" data-pair="pair7">å‰¯ä½œç”¨</div>
<div class="card" data-pair="pair6">åŠ‘é‡</div>
<div class="card" data-pair="pair15">å¦³å°±åœ¨é€™é‚Šç­‰æˆ‘ï¼Œå°ç—…äººå°å§ã€‚</div>
  </div>
</div>

<audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>


<div id="celebration" style="display:none; font-size: 24px; margin-top: 20px; color: #ff6f61; font-weight: bold;">
  ğŸ‰ æ­å–œå®Œæˆé…å°ï¼ä½ èŠ±äº† <span id="final-time"></span> ç§’å®Œæˆä»»å‹™ï¼<br>
  <span id="feedback"></span>
</div>

<script>
  let firstCard = null;
  let correctCount = 0;
  let isBusy = false;
  let gameEnded = false;
  let startTime = Date.now();
  const timeDisplay = document.getElementById('elapsed-time');
  const correctDisplay = document.getElementById('correct-count');
  const message = document.getElementById('message');
  const correctSound = document.getElementById('correct-sound');
  const wrongSound = document.getElementById('wrong-sound');
  const cards = document.querySelectorAll('.card');

  function startTimer() {
    timerInterval = setInterval(() => {
      const seconds = Math.floor((Date.now() - startTime) / 1000);
      timeDisplay.textContent = seconds;
    }, 1000);
  }

  function stopTimer() {
    clearInterval(timerInterval);
  }

  function showCelebration(finalSeconds) {
    document.getElementById("final-time").textContent = finalSeconds;
    const feedback = document.getElementById("feedback");
    if (finalSeconds <= 30) {
      feedback.textContent = "è¶…å¼·ï¼å¦³æ ¹æœ¬æ˜¯ç™»æ©Ÿå°å¤©æ‰ âœˆï¸ğŸŒŸ";
    } else if (finalSeconds <= 60) {
      feedback.textContent = "ä¸éŒ¯å–”ï½è¨˜æ†¶åŠ›æ»¿åˆ† ğŸ‘";
    } else {
      feedback.textContent = "å®Œæˆå°±æ˜¯å¥½äº‹ï½ä¸‹æ¬¡å¯ä»¥æ›´å¿«ä¸€é» ğŸ˜‰";
    }
    document.getElementById("celebration").style.display = "block";
    launchConfetti();
  }

  function launchConfetti() {
    const confettiCount = 80;
    for (let i = 0; i < confettiCount; i++) {
      const confetti = document.createElement("div");
      confetti.textContent = "ğŸ¬";
      confetti.style.position = "fixed";
      confetti.style.left = Math.random() * window.innerWidth + "px";
      confetti.style.top = "-40px";
      confetti.style.fontSize = "36px";
      confetti.style.opacity = "0.9";
      confetti.style.zIndex = 9999;
      document.body.appendChild(confetti);

      const fall = confetti.animate([
        { transform: 'translateY(0px)' },
        { transform: `translateY(${window.innerHeight + 100}px)` }
      ], { duration: 2000 + Math.random() * 1000, iterations: 1 });

      fall.onfinish = () => confetti.remove();
    }
  }

  function checkComplete() {
    if (correctCount === 20 && !gameEnded) {
      gameEnded = true;
      stopTimer();
      const secondsUsed = Math.floor((Date.now() - startTime) / 1000);
      showCelebration(secondsUsed);
    }
  }

  startTimer();

  cards.forEach(card => {
    card.addEventListener('click', () => {
      if (isBusy || gameEnded) return;
      if (card.classList.contains('matched') || card.classList.contains('selected')) return;
      card.classList.add('selected');

      if (!firstCard) {
        firstCard = card;
        return;
      }

      isBusy = true;
      if (firstCard.dataset.pair === card.dataset.pair && firstCard !== card) {
        firstCard.classList.add('matched');
        card.classList.add('matched');
        correctSound.play();
        correctCount++;
        correctDisplay.textContent = correctCount;
        checkComplete();
      } else {
        card.classList.add('wrong');
        firstCard.classList.add('wrong');
        wrongSound.play();
        setTimeout(() => {
          card.classList.remove('wrong', 'selected');
          firstCard.classList.remove('wrong', 'selected');
        }, 800);
      }
      setTimeout(() => {
        firstCard = null;
        isBusy = false;
      }, 820);
    });
  });
</script>

<script>
const englishCards = [
  "pharmacy", "prescription", "over-the-counter medicine", "painkiller", "cold medicine",
  "ointment", "dosage", "side effects", "pharmacist", "refill",
  "Do you remember what the doctor said about your prescription?",
  "I need to bring this prescription to the pharmacy and ask for a refill.",
  "You need some cold medicine too, right? Anything with fewer side effects.",
  "Maybe a small tube of ointment for this scratch.",
  "Iâ€™ll ask the pharmacist for you.",
  "Just wait here, pretty patient.",
  "Thanksâ€¦ and donâ€™t flirt with the pharmacist.",
  "My whole attention is on you.",
  "I have a prescription. Can I get a refill, please?",
  "Time to take your medicine, brave girl."
];
const chineseCards = [
  "è—¥å±€", "è™•æ–¹ç±¤", "éè™•æ–¹è—¥", "æ­¢ç—›è—¥", "æ„Ÿå†’è—¥",
  "è»Ÿè†", "åŠ‘é‡", "å‰¯ä½œç”¨", "è—¥åŠ‘å¸«", "è£œè—¥",
  "å¦³é‚„è¨˜å¾—é†«ç”Ÿæ€éº¼èªªå¦³çš„è™•æ–¹è—¥è¦æ€éº¼æ‹¿å—ï¼Ÿ",
  "æˆ‘è¦æ‹¿é€™å¼µè™•æ–¹ç±¤å»è—¥å±€ï¼Œç„¶å¾Œè«‹ä»–å€‘è£œè—¥ã€‚",
  "å¦³ä¹Ÿéœ€è¦ä¸€äº›æ„Ÿå†’è—¥å°å§ï¼Ÿè¦é‚£ç¨®å‰¯ä½œç”¨å°‘ä¸€é»çš„ã€‚",
  "é€™å€‹å°æ“¦å‚·å¯èƒ½ä¹Ÿè¦è²·ä¸€é»è»Ÿè†ã€‚",
  "æˆ‘å¹«å¦³å•è—¥åŠ‘å¸«ã€‚",
  "å¦³å°±åœ¨é€™é‚Šç­‰æˆ‘ï¼Œå°ç—…äººå°å§ã€‚",
  "è¬å•¦â€¦â€¦ç„¶å¾Œä¸å‡†è·Ÿè—¥åŠ‘å¸«æ­è¨•å–”ã€‚",
  "ä¸å¯èƒ½ï¼Œæˆ‘æ•´å€‹æ³¨æ„åŠ›éƒ½åœ¨å¦³èº«ä¸Šå•¦ã€‚",
  "æˆ‘æœ‰è™•æ–¹ç±¤ï¼Œè«‹å•å¯ä»¥è£œè—¥å—ï¼Ÿ",
  "è©²åƒè—¥å›‰ï¼Œæˆ‘çš„å‹‡æ•¢å°å§ã€‚"
];

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function renderCards() {
  const enCol = document.getElementById("english");
  const zhCol = document.getElementById("chinese");
  enCol.innerHTML = "";
  zhCol.innerHTML = "";

  const indices = [...Array(englishCards.length).keys()];
  const shuffledEn = [...indices];
  const shuffledZh = [...indices];
  shuffle(shuffledEn);
  shuffle(shuffledZh);

  shuffledEn.forEach(i => {
    const div = document.createElement("div");
    div.className = "card";
    div.dataset.pair = "pair" + i;
    div.textContent = englishCards[i];
    enCol.appendChild(div);
  });

  shuffledZh.forEach(i => {
    const div = document.createElement("div");
    div.className = "card";
    div.dataset.pair = "pair" + i;
    div.textContent = chineseCards[i];
    zhCol.appendChild(div);
  });
}

function setupMatchingLogic() {
  let firstCard = null;
  let correctCount = 0;
  let isBusy = false;
  let gameEnded = false;
  let startTime = Date.now();
  const timeDisplay = document.getElementById('elapsed-time');
  const correctDisplay = document.getElementById('correct-count');
  const message = document.getElementById('message');
  const correctSound = document.getElementById('correct-sound');
  const wrongSound = document.getElementById('wrong-sound');
  const celebration = document.getElementById('celebration');

  let timerInterval = setInterval(() => {
    const seconds = Math.floor((Date.now() - startTime) / 1000);
    timeDisplay.textContent = seconds;
  }, 1000);

  function stopTimer() {
    clearInterval(timerInterval);
  }

  function showCelebration(finalSeconds) {
    document.getElementById("final-time").textContent = finalSeconds;
    const feedback = document.getElementById("feedback");
    if (finalSeconds <= 30) {
      feedback.textContent = "è¶…å¼·ï¼å¦³æ ¹æœ¬æ˜¯ç™»æ©Ÿå°å¤©æ‰ âœˆï¸ğŸŒŸ";
    } else if (finalSeconds <= 60) {
      feedback.textContent = "ä¸éŒ¯å–”ï½è¨˜æ†¶åŠ›æ»¿åˆ† ğŸ‘";
    } else {
      feedback.textContent = "å®Œæˆå°±æ˜¯å¥½äº‹ï½ä¸‹æ¬¡å¯ä»¥æ›´å¿«ä¸€é» ğŸ˜‰";
    }
    celebration.style.display = "block";
    launchConfetti();
  }

  function launchConfetti() {
    const confettiCount = 80;
    for (let i = 0; i < confettiCount; i++) {
      const confetti = document.createElement("div");
      confetti.textContent = "ğŸ¬";
      confetti.style.position = "fixed";
      confetti.style.left = Math.random() * window.innerWidth + "px";
      confetti.style.top = "-40px";
      confetti.style.fontSize = "36px";
      confetti.style.opacity = "0.9";
      confetti.style.zIndex = 9999;
      document.body.appendChild(confetti);

      const fall = confetti.animate([
        { transform: 'translateY(0px)' },
        { transform: `translateY(${window.innerHeight + 100}px)` }
      ], { duration: 2000 + Math.random() * 1000, iterations: 1 });

      fall.onfinish = () => confetti.remove();
    }
  }

  function checkComplete() {
    if (correctCount === englishCards.length && !gameEnded) {
      gameEnded = true;
      stopTimer();
      const secondsUsed = Math.floor((Date.now() - startTime) / 1000);
      showCelebration(secondsUsed);
    }
  }

  document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('click', () => {
      if (isBusy || gameEnded) return;
      if (card.classList.contains('matched') || card.classList.contains('selected')) return;
      card.classList.add('selected');

      if (!firstCard) {
        firstCard = card;
        return;
      }

      isBusy = true;
      if (firstCard.dataset.pair === card.dataset.pair && firstCard !== card) {
        firstCard.classList.add('matched');
        card.classList.add('matched');
        correctSound.play();
        correctCount++;
        correctDisplay.textContent = correctCount;
        checkComplete();
      } else {
        card.classList.add('wrong');
        firstCard.classList.add('wrong');
        wrongSound.play();
        setTimeout(() => {
          card.classList.remove('wrong', 'selected');
          firstCard.classList.remove('wrong', 'selected');
        }, 800);
      }
      setTimeout(() => {
        firstCard = null;
        isBusy = false;
      }, 820);
    });
  });
}

window.addEventListener("DOMContentLoaded", () => {
  renderCards();
  setTimeout(setupMatchingLogic, 200);
});
</script>

</body>

</html>
